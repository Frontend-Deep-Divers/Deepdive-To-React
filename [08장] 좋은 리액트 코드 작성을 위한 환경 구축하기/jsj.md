# 8장 좋은 리액트 코드 작성을 위한 환경 구축하기

## 8.1 ESLint를 활용한 정적 코드 분석

- ESLint : 자바스크립트 코드를 정적 분석해 잠재적인 문제를 발견하고 나아가 수정까지 도와주는 도구
- ESLint가 자바스크립트 코드를 분석하는 과정
    - 자바 스크립트 코드를 문자열로 읽는다.
    - 자바 스크립트 코드를 분석할 수 있는 parser로 코드를 구조화한다.
    - 위에서 구조화한 트리를 AST라 하며, 이 구조화된 트리를 기준으로 각종 규칙과 대조한다.
    - 규칙과 대조했을 때 이를 위반한 코드를 알리거나 수정한다.
- ESLint는 기본적으로 espree라는 파서를 사용한다.
- eslint-plugin
    - eslint-plugin이라는 접두사로 시작하는 플러그인은 규칙들을 모아놓은 패키지다.
- eslint-config
    - eslint-plugin이 리액트, import와 같이 특정 프레임워크나 도메인과 관련된 규칙을 묶어서 제공하는 패키지라면 eslint-config는 이러한 eslint-plugin을 한데 묶어서 완벽하게 한 세트로 제공하는 패키지라 할 수 있다.
    - eslint-config-arbnb : 지금까지도 리액트 기반 프로젝트에서 eslint-config를 선택한다고 가정했을 때 가장 먼저 손에 꼽는 eslint-config다
    - @titicaca/triple-config-kit : 한국 커뮤니티에서 운영되는 eslint-config 중 유지보수가 활발한 편에 속하며 많이 쓰이는 eslint-config 중 하나다.
    - eslint-config-next : 리액트 기반 Next.js 프레임 워크를 사용하고 있는 프로젝트에서 사용할 수 있는 eslint-config
- 나만의 ESLint 규칙 만들기
    - no-restricted-imports : 어떠한 모듈을 import하는 것을 금지하기 전에 만들어진 규칙으로 추가적으로 인수를 제공하면 import 할 수 있는 모듈을 제한할 수 있다.
    - 기타 등등..
- 주의점
    - Prettier와의 충돌
        - Prettier은 코드의 포매팅을 도와주는 도구로 ESLint와 마찬가지로 코드를 정적 분석해서 문제를 해결하지만 코드의 포매팅에 관련해서만 처리를 한다. ESLint에서도 Prettier에서 처리하는 작업을 처리할 수 있기 때문에 두 가지 모두를 자바스크립트 코드에서 실행한다면 서로 규칙이 충돌하여 에러가 발생할 수 있다.
        - 이 경우 ESLint에서 Prettier에서 제공하는 규칙을 끄거나 자바스크립트, 타입스크립트는 ESLint에, 그외의 파일은 모두 Prettier에 맡기는 방법이 있다.

## 8.2 리액트 팀이 권장하는 리액트 테스트 라이브러리

- 프론트의 경우 HTML, CSS 와 같은 디자인 요소 뿐만 아니라 사용자의 인터랙션, 의도치 않은 작동 등 브라우저에서 발생할 수 있는 다양한 시나리오를 고려해야 하기에 일반적으로 테스팅 하기가 매우 번거롭다..
- React Testing Library
    - DOM Testing Library를 기반으로 만들어진 테스팅 라이브러리로 리액트를 기반으로 한 테스트를 수행하기 위해 만들어졌다.
    - DOM Testing Library : jsdom (순수하게 자바스크립트로 작성된 라이브러리로, HTML이 없는 자바스크립트만 존재하는 환경에서 HTML과 DOM을 사용할 수 있도록 해주는 라이브러리)을 기반으로 자바스크립트 환경에서도 HTML을 사용하여 DOM Testing Library에서 제공하는 API를 사용해 테스트를 수행할 수 있다.
- 자바스크립트 테스트의 기초
    - 테스트 코드를 작성하는 방식
        - 테스트할 함수나 모듈을 선정한다.
        - 함수나 모듈이 반환하길 기대하는 값을 적는다
        - 함수나 모듈의 실제 반환 값을 적는다
        - 3번의 기대에 따라 2번의 결과가 일치하는지 확인한다
        - 기대하는 결과를 반환한다면 테스트는 성공이며, 만약 기대와 다른 결과를 반환하면 에러를 던진다
    - assertion 라이브러리 : 테스트 결과를 확인할 수 있도록 도와주는 라이브러리
    - 테스팅 프레임워크 : 어설션을 기반으로 테스트를 수행하며, 추가로 테스트 코드 작성자에게 도움이 될 만한 정보를 알려주는 역할도 함께 수행한다.